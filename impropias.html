<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Integrales Impropias</title>
  <link rel="stylesheet" href="/static/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>
  <script src="/static/app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
</head>
<body>
  <header>
    <div class="logotipo-title">
      <img src="/static/logotipo.jpeg" alt="logo" class="logo">
      <h1>Proyecto C√°lculo II</h1>
    </div>
    <nav>
      <a href="/index.html">Inicio</a>
      <a href="/templates/pages/tecnicas.html">T√©cnicas</a>
      <a href="/quienes">Qui√©nes somos</a>
      <input id="search" type="text" placeholder="Buscar tema..">
      <button>üîç</button>
    </nav>
  </header>

  <main class="contenido">
    <h2>Integrales Impropias</h2>

    <section>
      <h3>¬øQu√© son?</h3>
      <p>Una integral es <strong>impropia</strong> cuando alguno de los l√≠mites es infinito o la funci√≥n tiene una discontinuidad en el intervalo. Se eval√∫a como un l√≠mite:</p>
      <p style="font-weight:700;">Si \( \int_a^{\infty} f(x)\,dx \) entonces \( \int_a^{\infty} f(x)\,dx = \lim_{b\to\infty} \int_a^{b} f(x)\,dx.\)</p>
      <p>Si existe el l√≠mite, la integral <em>converge</em>; si no existe/tiende a infinito, <em>diverge</em>.</p>
    </section>

    <section>
      <h3>Ejemplos</h3>
      <div class="example">
        <strong>Ejemplo 1 (l√≠mite infinito)</strong><br>
        Evaluar \( \int_1^{\infty} \frac{1}{x^2}\,dx \).<br>
        \(\int_1^{b} x^{-2} dx = \left[-x^{-1}\right]_1^b = -\tfrac{1}{b} + 1.\)  
        Tomando \(b\to\infty\) queda \(1\). Converge.
      </div>

      <div class="example">
        <strong>Ejemplo 2 (discontinuidad interior)</strong><br>
        Evaluar \( \int_0^1 \frac{1}{\sqrt{x}} dx \) (discontinua en 0).<br>
        Tomamos l√≠mite: \(\lim_{\epsilon\to0^+}\int_{\epsilon}^{1} x^{-1/2} dx = \lim_{\epsilon\to0^+} [2\sqrt{x}]_{\epsilon}^{1} = 2.\)
      </div>
    </section>

    <section>
      <h3>Mini calculadora (aprox. impropias)</h3>
      <p>Si escribes <code>infty</code> o <code>inf</code> se aproximar√° por <code>1e6</code> (usa esto para comprobar convergencia r√°pida).</p>
      <div class="calculadora">
        <input id="funcImpropia" placeholder="Ej: 1/x**2 o 1/sqrt(x)">
        <input id="aImpropia" placeholder="L√≠mite inferior (ej: 1 √≥ 0)">
        <input id="bImpropia" placeholder="L√≠mite superior (ej: infty √≥ 1)">
        <button id="btnImpropia" class="btn">Calcular</button>

        <div class="resultado">
          <h3>Resultado:</h3>
          <p id="respImpropia" class="resultado-texto"></p>
          <h4>Detalles:</h4>
          <p id="pasosImpropia" class="resultado-pasos"></p>
        </div>
      </div>

    </section>

    <section>
      <h3>Notas y criterios</h3>
      <ul>
        <li>Comparaci√≥n: si \(0 \le f(x) \le g(x)\) y \(\int g\) converge, entonces \(\int f\) converge.</li>
        <li>Integral p: \(\int_1^{\infty} \frac{1}{x^p} dx\) converge si \(p>1\), diverge si \(p\le1\).</li>
      </ul>
    </section>
  </main>
  <script>
    // Manejo simple cliente -> servidor (usa /api/integral_definida)
    document.getElementById("btnImpropia").addEventListener("click", async () => {
      const f = document.getElementById("funcImpropia").value.trim();
      let a = document.getElementById("aImpropia").value.trim();
      let b = document.getElementById("bImpropia").value.trim();
      const resp = document.getElementById("respImpropia");
      const pasos = document.getElementById("pasosImpropia");

      // Reemplazo aproximado para infinito
      let aviso = "";
      if (/infty|inf/i.test(a)) { a = "-1e6"; aviso += "Se aproxim√≥ l√≠mite inferior a -1e6. "; }
      if (/infty|inf/i.test(b)) { b = "1e6"; aviso += "Se aproxim√≥ l√≠mite superior a 1e6. "; }

      try {
        const response = await fetch("/api/integral_definida", {
          method: "POST",
          headers: {"Content-Type":"application/json"},
          body: JSON.stringify({ funcion: f, a: a, b: b })
        });
        const data = await response.json();
        if (data.resultado) {
          resp.innerText = data.resultado + (aviso ? " ("+aviso.trim()+")" : "");
          pasos.innerText = data.pasos;
        } else {
          resp.innerText = "Error: " + (data.error || "respuesta vac√≠a");
          pasos.innerText = "";
        }
      } catch (err) {
        resp.innerText = "Error en la petici√≥n: " + err;
        pasos.innerText = "";
      }
    });
  </script>

  <footer><p>&copy; 2025 Proyecto C√°lculo II</p></footer>
  
